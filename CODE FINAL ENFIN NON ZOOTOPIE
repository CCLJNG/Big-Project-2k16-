# -*- coding: utf-8 -*-
"""
Created on Sat May 21 16:39:09 2016

@author: user
"""


import pygame #Importation de notre module principal

#def menu(): #seulement si on a le temps....
#    pass
      
def effet_choix(n_event, lovejauge):
    #n correspond à l'effet du bouton choisi
    #lovejauge correspond a la lovejauge de la meuf choisie
    #Cette fonction fait varier la lovejauge en fonction du choix
    if n_event == 0:
        lovejauge += 0
    if lovejauge < 100 and n_event == 1:
        lovejauge += 25
    elif n_event == 2 and lovejauge > 0:
        lovejauge -= 25
        
    return lovejauge

def image_lovejauge(lovejauge): #fonction renvoyant une image qui correspond à la valeur de lovejauge
    if lovejauge == 0:
        lovepic = pygame.image.load("lovejauge_0.png").convert_alpha()
    elif lovejauge == 25:
        lovepic = pygame.image.load("lovejauge_25.png").convert_alpha()
    elif lovejauge == 50:
        lovepic = pygame.image.load("lovejauge_50.png").convert_alpha()
    elif lovejauge == 75:
        lovepic = pygame.image.load("lovejauge_75.png").convert_alpha()
    else:
        lovepic = pygame.image.load("lovejauge_100.png").convert_alpha()
        
    return lovepic
    
    
def choix(n_event, lovejauge, girl_pic, fenetre, test_pic): #CA CEST LA MACHINE A SMOOTHIE OK 
    #n_event est le numero du dialogue 
     #on ajoute le dialogue de la fille
    i = 1
    choix_affiches = 0
    suite = 0
    continuer = 1
    while i == 1:
        
        #sinon ça continue sans nous parce qu'on est pas en train de cliquer sur un bouton        
        #fenetre.blit(test_pic, (0,0))
        #pygame.event.set_allowed(pygame.MOUSEBUTTONDOWN)
        for event in pygame.event.get():            
            while continuer != 0:
    
                for event in pygame.event.get():   #On parcours la liste de tous les événements reçus
                    if event.type == pygame.QUIT:     #Si un de ces événements est de type QUIT
                        pygame.quit() # on quitte
                        quit()
                    else:
                        if (event.type != pygame.MOUSEBUTTONDOWN): #tant qu'on appuie pas, on continue
                            continue           
                        print("choix_affiches=" , choix_affiches)
                        print(event)
                        print("suite=", suite)
                        
                        if suite == 0:
                            if (event.type == pygame.MOUSEBUTTONDOWN) and (event.button == 1) and (380 < event.pos[1] < 480) and (540 < event.pos[0] < 640): #c'est le bouton coeur pour avancer dans le dialogue
                                fenetre.blit(n_event[0], (0,0))    
                                pygame.display.flip()
                                suite = 1
                            else:
                                continue

                        
                        if suite == 1:
                            if (event.type == pygame.MOUSEBUTTONDOWN)and (event.button == 1) and (380 < event.pos[1] < 480) and (540 < event.pos[0] < 640):
                                fenetre.blit(n_event[4], (0,0)) #si on appuie sur "next", l'image avec les choix s'affiche
                                pygame.display.flip()
                                choix_affiches = 1 
                                suite = 2
                            else:
                                continue
                            
                        if choix_affiches == 1:
                            if event.type == pygame.MOUSEBUTTONDOWN and event.button == 1 and 50 < event.pos[1] < 100 and 50 < event.pos[0] < 430:
                                lovejauge = effet_choix(n_event[1], lovejauge)
                                i = 0
                            elif event.type == pygame.MOUSEBUTTONDOWN and event.button == 1 and 150 < event.pos[1] < 200 and 50 < event.pos[0] < 430:
                                lovejauge = effet_choix(n_event[2], lovejauge)
                                i = 0
                            elif event.type == pygame.MOUSEBUTTONDOWN and event.button == 1 and 250 < event.pos[1] < 300 and 50 < event.pos[0] < 430:
                                lovejauge = effet_choix(n_event[3], lovejauge)
                                i = 0
                            else:
                                continue

                        pygame.display.flip() 

            
    return lovejauge
    
def main():
    
    pygame.init() #on initialise les modules importés de pygame
   
    #Ouverture de la fenêtre Pygame
    fenetre = pygame.display.set_mode((640, 480))
    
    #menu() CA ON VERRA SELON NOTRE TIME
        
    #girl = choix_fille() # on choisit la fille à séduire

    #Chargement et collage du fond
    fond = pygame.image.load("fond_classe.png").convert()
    fenetre.blit(fond, (0,0)) 
    test_pic = pygame.image.load("test.png").convert() #à supprimer après

    #Rafraîchissement de l'écran, essentiel !
    pygame.display.flip()

    #Boucle infinie
    continuer = 1
    while continuer != 0:
        for event in pygame.event.get():   #On parcours la liste de tous les événements reçus
            if event.type == pygame.QUIT: 
                continuer = 0 #Si un de ces événements est de type QUIT
                #pygame.quit()      #On arrête la boucle
            else:
                girl = "clover" #temporaire 
                if girl == "clover":
                    girl_pic = pygame.image.load("clover_happy.png").convert_alpha()
                    #on charge le photo de CLOVER
                    
                    #on va charger toutes les images de dialogue et les choix possibles pour les 6 interactions
                    dialogue_mec = pygame.image.load("dialogue_c_0.png").convert_alpha()
                    pic_1 = pygame.image.load("dialogue_c_1.png").convert_alpha()
                    pic_1_2 = pygame.image.load("choix_c_1.png").convert_alpha()
                    n_event_1 = (pic_1, 1, 2, 0, pic_1_2)
                    pic_2 = pygame.image.load("dialogue_c_2.png").convert_alpha()
                    pic_2_2 = pygame.image.load("choix_c_2.png").convert_alpha()
                    n_event_2 = (pic_2, 1, 0, 2, pic_2_2)                    
                    pic_3 = pygame.image.load("dialogue_c_3.png").convert_alpha()
                    pic_3_2 = pygame.image.load("choix_c_3.png").convert_alpha()
                    n_event_3 = (pic_3, 1, 0, 2, pic_3_2)
                    pic_4 = pygame.image.load("dialogue_c_4.png").convert_alpha()
                    pic_4_2 = pygame.image.load("choix_c_4.png").convert_alpha()
                    n_event_4 = (pic_4, 2, 1, 0, pic_4_2)
                    pic_5 = pygame.image.load("dialogue_c_5.png").convert_alpha()
                    pic_5_2 = pygame.image.load("choix_c_5.png").convert_alpha()
                    n_event_5 = (pic_5, 1, 2, 0, pic_5_2)
                    pic_6 = pygame.image.load("dialogue_c_6.png").convert_alpha()
                    pic_6_2 = pygame.image.load("choix_c_6.png").convert_alpha()
                    n_event_6 = (pic_6, 0, 1, 2, pic_6_2)
                elif girl == "maya":
                    dialogue_mec = pygame.image.load("dialogue_m_0.png").convert_alpha()
                    girl_pic = pygame.image.load("maya_happy.png").convert_alpha()
                    pic_1 = pygame.image.load("dialogue_m_1.png").convert_alpha()
                    pic_1_2 = pygame.image.load("choix_m_1.png").convert_alpha()
                    n_event_1 = (pic_1, 1, 2, 0, pic_1_2)
                    pic_2 = pygame.image.load("dialogue_m_2.png").convert_alpha()
                    pic_2_2 = pygame.image.load("choix_m_2.png").convert_alpha()
                    n_event_2 = (pic_2, 1, 0, 2, pic_2_2)
                    pic_3 = pygame.image.load("dialogue_m_3.png").convert_alpha()
                    pic_3_2 = pygame.image.load("choix_m_3.png").convert_alpha()
                    n_event_3 = (pic_3, 1, 0, 2, pic_3_2)
                    pic_4 = pygame.image.load("dialogue_m_4.png").convert_alpha()
                    pic_4_2 = pygame.image.load("choix_m_4.png").convert_alpha()
                    n_event_4 = (pic_4, 2, 1, 0, pic_4_2)
                    pic_5 = pygame.image.load("dialogue_m_5.png").convert_alpha()
                    pic_5_2 = pygame.image.load("choix_m_5.png").convert_alpha()
                    n_event_5 = (pic_5, 1, 2, 0, pic_5_2)
                    pic_6 = pygame.image.load("dialogue_m_6.png").convert_alpha()
                    pic_6_2 = pygame.image.load("choix_m_6.png").convert_alpha()
                    n_event_6 = (pic_6, 0, 1, 2, pic_6_2)
                else:
                    dialogue_mec = pygame.image.load("dialogue_a_0.png").convert_alpha()
                    girl_pic = pygame.image.load("alice_happy.png").convert_alpha()
                    pic_1 = pygame.image.load("dialogue_a_1.png").convert_alpha()
                    pic_1_2 = pygame.image.load("choix_a_1.png").convert_alpha()
                    n_event_1 = (pic_1, 1, 2, 0, pic_1_2)
                    pic_2 = pygame.image.load("dialogue_a_2.png").convert_alpha()
                    pic_2_2 = pygame.image.load("choix_a_2.png").convert_alpha()
                    n_event_2 = (pic_2, 1, 0, 2, pic_2_2)
                    pic_3 = pygame.image.load("dialogue_a_3.png").convert_alpha()
                    pic_3_2 = pygame.image.load("choix_a_3.png").convert_alpha()
                    n_event_3 = (pic_3, 1, 0, 2, pic_3_2)
                    pic_4 = pygame.image.load("dialogue_a_4.png").convert_alpha()
                    pic_4_2 = pygame.image.load("choix_a_4.png").convert_alpha()
                    n_event_4 = (pic_4, 2, 1, 0, pic_4_2)
                    pic_5 = pygame.image.load("dialogue_a_5.png").convert_alpha()
                    pic_5_2 = pygame.image.load("choix_a_5.png").convert_alpha()
                    n_event_5 = (pic_5, 1, 2, 0, pic_5_2)
                    pic_6 = pygame.image.load("dialogue_a_6.png").convert_alpha()
                    pic_6_2 = pygame.image.load("choix_a_6.png").convert_alpha()
                    n_event_6 = (pic_6, 0, 1, 2, pic_6_2)
                    
                lovejaugeactuelle = 0 #on initialise notre love jauge à 0, normal!
                #perso = pygame.image.load(girl_).convert_alpha()
                fenetre.blit(girl_pic, (0,0)) #on ajoute à la fenetre, l'image de la fille
                #fenetre.blit(test_pic, (0,0))
                pygame.display.flip()
                i = 0
                while i < 6:
                #for i in range(0,6):
                    #Chargement et collage du personnage
                    #Pour les 6 interactions on appelle la fonction "smoothie"
                    if i == 0:
                        fenetre.blit(dialogue_mec, (0,0)) #tout d'abord, on place le dialogue du garçon
                        n_event = n_event_1                
                        pygame.display.flip()
                        i += 1
                    elif i == 1:
                        n_event = n_event_2
                        i += 1
                    elif i == 2:
                        n_event = n_event_3
                        i += 1
                    elif i == 3:
                        n_event = n_event_4
                        i += 1
                    elif i == 4:
                        n_event = n_event_5
                        i += 1
                    elif i == 5:
                        n_event = n_event_6
                        i += 1

                    lovejauge = choix(n_event, lovejaugeactuelle, girl_pic, fenetre, test_pic) # ca c'est la fonction smoothie
                    lovepic = image_lovejauge(lovejauge)
                    fenetre.blit(lovepic, (0,0))
                    pygame.display.flip()
                    
    pygame.display.flip()
    pygame.quit()
    quit()

main()
